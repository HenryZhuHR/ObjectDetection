<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.29">
    <title>基于目标检测的数据集制作 | 目标检测</title><meta name="description" content="这是一个关于目标检测的故事">
    <link rel="modulepreload" href="/deep-detection/assets/app.797b6d26.js"><link rel="modulepreload" href="/deep-detection/assets/index.html.d98d0537.js"><link rel="modulepreload" href="/deep-detection/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/deep-detection/assets/index.html.4f79b12f.js">
    <link rel="stylesheet" href="/deep-detection/assets/style.f6c364e2.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/deep-detection/" class=""><!----><span class="site-name can-hide">目标检测</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/deep-detection/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="参考"><span class="title">参考</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="参考"><span class="title">参考</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>数据集</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/deep-detection/dataset/voc2012/README.md" class="nav-link" aria-label="VOC2012数据"><!--[--><!--]--> VOC2012数据 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/deep-detection/dataset/custom/README.md" class="nav-link" aria-label="自定义数据集制作"><!--[--><!--]--> 自定义数据集制作 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>模型</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/deep-detection/model/yolov5/README.md" class="nav-link" aria-label="yolov5"><!--[--><!--]--> yolov5 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/deep-detection/" class="nav-link" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="参考"><span class="title">参考</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="参考"><span class="title">参考</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>数据集</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/deep-detection/dataset/voc2012/README.md" class="nav-link" aria-label="VOC2012数据"><!--[--><!--]--> VOC2012数据 <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/deep-detection/dataset/custom/README.md" class="nav-link" aria-label="自定义数据集制作"><!--[--><!--]--> 自定义数据集制作 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>模型</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/deep-detection/model/yolov5/README.md" class="nav-link" aria-label="yolov5"><!--[--><!--]--> yolov5 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">基于目标检测的数据集制作</p><ul class=""><li><!--[--><a aria-current="page" href="/deep-detection/dataset/custom/#简单的说明" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="简单的说明"><!--[--><!--]--> 简单的说明 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/deep-detection/dataset/custom/#数据采集与归档" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="数据采集与归档"><!--[--><!--]--> 数据采集与归档 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/deep-detection/dataset/custom/#数据集配置文件" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="数据集配置文件"><!--[--><!--]--> 数据集配置文件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/deep-detection/dataset/custom/#数据预处理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="数据预处理"><!--[--><!--]--> 数据预处理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/deep-detection/dataset/custom/#数据标注" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="数据标注"><!--[--><!--]--> 数据标注 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/deep-detection/dataset/custom/#转换至可训练的标准数据集" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="转换至可训练的标准数据集"><!--[--><!--]--> 转换至可训练的标准数据集 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/deep-detection/dataset/custom/#转换成-voc-格式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="转换成 VOC 格式"><!--[--><!--]--> 转换成 VOC 格式 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/deep-detection/dataset/custom/#转换成用于-yolov5-的-coco-格式" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="转换成用于 YOLOv5 的 COCO 格式"><!--[--><!--]--> 转换成用于 YOLOv5 的 COCO 格式 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/deep-detection/dataset/custom/#基于视频的数据处理" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="基于视频的数据处理"><!--[--><!--]--> 基于视频的数据处理 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="基于目标检测的数据集制作" tabindex="-1"><a class="header-anchor" href="#基于目标检测的数据集制作" aria-hidden="true">#</a> 基于目标检测的数据集制作</h1><ul><li><a href="#%E5%9F%BA%E4%BA%8E%E7%9B%AE%E6%A0%87%E6%A3%80%E6%B5%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86%E5%88%B6%E4%BD%9C">基于目标检测的数据集制作</a><ul><li><a href="#%E7%AE%80%E5%8D%95%E7%9A%84%E8%AF%B4%E6%98%8E">简单的说明</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E4%B8%8E%E5%BD%92%E6%A1%A3">数据采集与归档</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E9%9B%86%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">数据集配置文件</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86">数据预处理</a></li><li><a href="#%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8">数据标注</a></li><li><a href="#%E8%BD%AC%E6%8D%A2%E8%87%B3%E5%8F%AF%E8%AE%AD%E7%BB%83%E7%9A%84%E6%A0%87%E5%87%86%E6%95%B0%E6%8D%AE%E9%9B%86">转换至可训练的标准数据集</a><ul><li><a href="#%E8%BD%AC%E6%8D%A2%E6%88%90-voc-%E6%A0%BC%E5%BC%8F">转换成 VOC 格式</a></li><li><a href="#%E8%BD%AC%E6%8D%A2%E6%88%90%E7%94%A8%E4%BA%8E-yolov5-%E7%9A%84-coco-%E6%A0%BC%E5%BC%8F">转换成用于 YOLOv5 的 COCO 格式</a></li></ul></li><li><a href="#%E5%9F%BA%E4%BA%8E%E8%A7%86%E9%A2%91%E7%9A%84%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86">基于视频的数据处理</a></li></ul></li></ul><h2 id="简单的说明" tabindex="-1"><a class="header-anchor" href="#简单的说明" aria-hidden="true">#</a> 简单的说明</h2><ul><li>需要说明的是，脚本只能按照标注进行分类的数据进行处理，如果一张图片有多个标注，是无法处理的</li><li>该项目仅仅是脚本库，不包括数据集</li></ul><h2 id="数据采集与归档" tabindex="-1"><a class="header-anchor" href="#数据采集与归档" aria-hidden="true">#</a> 数据采集与归档</h2><p>将采集到的数据放置在 <code>dataset-custom/src</code> 目录下面，并且按照类别归档至对应文件夹下，参考的文件目如下</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>·
└── dataset-custom  <span class="token comment"># 数据集文件夹</span>
    └── src         <span class="token comment"># 原始图片文件，按照文件夹分类</span>
        ├─ A        <span class="token comment"># 类别 A</span>
        ├─ B
        └─ <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>必须保证原始数据都在 <code>src</code> 内，否则运行会报错</p></blockquote><h2 id="数据集配置文件" tabindex="-1"><a class="header-anchor" href="#数据集配置文件" aria-hidden="true">#</a> 数据集配置文件</h2><p>为了便于对多个数据集进行操作，我们采用配置文件 <code>config/*.yaml</code> 对多个数据集进行配置</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dataset</span><span class="token punctuation">:</span> &lt;path_to_dataset<span class="token punctuation">&gt;</span>

<span class="token key atrule">img_size</span><span class="token punctuation">:</span>
    <span class="token key atrule">width</span><span class="token punctuation">:</span> <span class="token number">640</span>

<span class="token key atrule">trainset_percent</span><span class="token punctuation">:</span> <span class="token number">0.8</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>你可以参考 <code>config/custom.yaml</code> 新建一个 <code>config/custom.yaml</code> ，并将配置参数 <code>dataset </code>修改成对应目录即可，例如</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">dataset</span><span class="token punctuation">:</span> ~/dataset/dataset<span class="token punctuation">-</span>custom
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p>数据集的路径建议使用绝对路径</p></blockquote><p>在运行脚本的时候，只要加上参数 <code>--conf</code> 就可以处理多个不同的文件夹，如果不添加额外参数，则默认配置文件为 <code>config/custom.yaml</code></p><h2 id="数据预处理" tabindex="-1"><a class="header-anchor" href="#数据预处理" aria-hidden="true">#</a> 数据预处理</h2><p>数据集的图片的大小不能太大，需要预先压缩尺寸</p><p>在配置文件 <code>config/custom.yaml</code> 中添加压缩后的图像大小，这里仅需要给定压缩后的图片</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">img_size</span><span class="token punctuation">:</span>
    <span class="token key atrule">height</span><span class="token punctuation">:</span> <span class="token number">640</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>执行 <code>scripts/resize.py</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>python3 scripts/resize.py <span class="token punctuation">[</span>--conf<span class="token punctuation">]</span> <span class="token punctuation">[</span>--not_rename<span class="token punctuation">]</span>
<span class="token comment"># example</span>
python3 scripts/resize.py --conf config/custom.yaml
python3 scripts/resize.py --conf config/custom.yaml --not_rename
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>运行成功后，目录内全部文件会按照目录名进行重命名并且压缩数据集，并且在 <code>src</code> 同级目录下产生 <code>labeled</code> 目录，在这里进行标注，例如</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>·
└── dataset-custom  <span class="token comment"># 数据集文件夹</span>
    ├── src         <span class="token comment"># 原始数据，按照类别进行归档</span>
    │   ├── A
    │   ├── B
    │   └── <span class="token punctuation">..</span>.
    └── labeled     <span class="token comment"># 压缩、重命名后的文件，在这里进行标注</span>
        ├── A
        ├── B
        └── <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>labeled</code> 目录是用于后续步骤<a href="#%E6%95%B0%E6%8D%AE%E6%A0%87%E6%B3%A8">数据标注</a>的目录，这样我们可以在不破坏原始数据对情况下完成数据处理，如果不再需要原始数据，在完成此步骤后，可以删除 <code>src</code> 目录</p><h2 id="数据标注" tabindex="-1"><a class="header-anchor" href="#数据标注" aria-hidden="true">#</a> 数据标注</h2><p>在前面步骤中生成的 <code>labeled</code> 目录是用于数据标注的目录，选择图像注释工具 labelImg 进行标注。</p><p><a href="https://github.com/tzutalin/labelImg" target="_blank" rel="noopener noreferrer">labelImg<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 是 Python 编写、基于 Qt 图形界面的软件，标注以 PASCAL VOC 格式（ImageNet 使用的格式）另存为 <code>.xml</code> 文件。此外，它还支持 YOLO 格式。</p><p>你可以通过从<a href="https://github.com/tzutalin/labelImg" target="_blank" rel="noopener noreferrer">源码编译<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>的方式安装，也可以通过 pip3 快速安装</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>pip <span class="token function">install</span> labelImg
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>安装后，可以在命令行启动</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>labelImg
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>在 Ubuntu 下启动后的界面如下（Windows 版本可能略有差异） <img src="/deep-detection/assets/labelImg-start.4b6365be.png" alt="start"></p><ul><li>打开文件 : 标注单张图像（不推荐使用）</li><li><strong>打开目录</strong> : 打开数据集存放的目录，目录下应该是图像的位置</li><li><strong>改变存放目录</strong>: 标注文件 <code>.xml</code> 存放的目录</li><li>下一个图片:</li><li>上一个图像:</li><li><strong>验证图像</strong>: 验证标记无误，用于全部数据集标记完成后的检查工作</li><li><strong>保存</strong>: 保存标记结果，快捷键 <code>Ctrl+s</code></li><li><strong>数据集格式</strong>: <code>PascalVOC</code> 和 <code>YOLO</code> 可选，一般选择 <code>PascalVOC</code> 即可，需要 <code>YOLO</code> 可以之后进行转换</li></ul><p>点击 <code>创建区块</code> 创建一个矩形框，画出范围 <img src="/deep-detection/assets/labelImg-rect-1.40e6e12f.png" alt="rect"></p><p>每个类别都有对应的颜色加以区分 <img src="/deep-detection/assets/labelImg-rect-3.3150d9e3.png" alt="rect"></p><p>完成一张图片的标注后，点击 <code>下一个图片</code></p><ul><li>labelImg 快捷键</li></ul><table><thead><tr><th style="text-align:center;">快捷键</th><th style="text-align:center;">功能</th><th style="text-align:center;">快捷键</th><th style="text-align:center;">功能</th></tr></thead><tbody><tr><td style="text-align:center;">Ctrl+u</td><td style="text-align:center;">从目录加载所有图像</td><td style="text-align:center;">w</td><td style="text-align:center;">创建一个矩形框</td></tr><tr><td style="text-align:center;">Ctrl+R</td><td style="text-align:center;">更改默认注释目标目录</td><td style="text-align:center;">d</td><td style="text-align:center;">下一张图片</td></tr><tr><td style="text-align:center;">Ctrl+s</td><td style="text-align:center;">保存当前标注结果</td><td style="text-align:center;">a</td><td style="text-align:center;">上一张图片</td></tr><tr><td style="text-align:center;">Ctrl+d</td><td style="text-align:center;">复制当前标签和矩形框</td><td style="text-align:center;">del</td><td style="text-align:center;">删除选定的矩形框</td></tr><tr><td style="text-align:center;">space</td><td style="text-align:center;">将当前图像标记为已验证</td><td style="text-align:center;">Ctrl+</td><td style="text-align:center;">放大</td></tr><tr><td style="text-align:center;">↑→↓←</td><td style="text-align:center;">键盘箭头移动选定的矩形框</td><td style="text-align:center;">Ctrl–</td><td style="text-align:center;">缩小</td></tr></tbody></table><h2 id="转换至可训练的标准数据集" tabindex="-1"><a class="header-anchor" href="#转换至可训练的标准数据集" aria-hidden="true">#</a> 转换至可训练的标准数据集</h2><p>当标注完成后，我们就需要将图像和标注文件转换为我们所需要的数据格式</p><p>可用的转换流程如下</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>labeled -<span class="token operator">&gt;</span> VOC  <span class="token comment"># to PASCAL VOC</span>
            └─<span class="token operator">&gt;</span> YOLO -<span class="token operator">&gt;</span> COCO  <span class="token comment"># to YOLOv5 COCO</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>目前已经完成的数据包括</p><ol><li><a href="#%E8%BD%AC%E6%8D%A2%E6%88%90-VOC-%E6%A0%BC%E5%BC%8F">转换成 VOC 格式</a></li><li><a href="#%E8%BD%AC%E6%8D%A2%E6%88%90%E7%94%A8%E4%BA%8E-YOLOv5-%E7%9A%84-COCO-%E6%A0%BC%E5%BC%8F">转换成用于 YOLOv5 的 COCO 格式</a></li></ol><h3 id="转换成-voc-格式" tabindex="-1"><a class="header-anchor" href="#转换成-voc-格式" aria-hidden="true">#</a> 转换成 VOC 格式</h3><p>转换成 VOC 数据集流程如下</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>labeled -<span class="token operator">&gt;</span> VOC  <span class="token comment"># to PASCAL VOC</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>执行 <code>labeled-voc.py</code> 将已经标记好的数据集转化成VOC格式</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>python3 scripts/labeled-voc.py <span class="token punctuation">[</span>--conf<span class="token punctuation">]</span>
<span class="token comment"># example</span>
python3 scripts/labeled-voc.py
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>运行后会在 VOC 目录下类别文件 <code>classes.names</code> 和训练集文件 <code>train.txt</code> 、验证集文件 <code>val.txt</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>·
└── dataset-custom  <span class="token comment"># 数据集文件夹</span>
    ├── src         <span class="token comment"># 原始数据，按照类别进行归档</span>
    ├── labeled     <span class="token comment"># 压缩、重命名后的文件，在这里进行标注</span>
    └── VOC         <span class="token comment"># VOC 标准数据集，用于训练</span>
        ├── Annotations
        ├── ImageSets
        │   └── Main
        │       ├── classes.names
        │       ├── train.txt
        │       └── val.txt
        └── JPEGImages            
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="转换成用于-yolov5-的-coco-格式" tabindex="-1"><a class="header-anchor" href="#转换成用于-yolov5-的-coco-格式" aria-hidden="true">#</a> 转换成用于 YOLOv5 的 COCO 格式</h3><p>转换成用于 <a href="https://github.com/ultralytics/yolov5" target="_blank" rel="noopener noreferrer">ultralytics/yolov5<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> 的 COCO 数据集流程如下</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>labeled -<span class="token operator">&gt;</span> VOC -<span class="token operator">&gt;</span> YOLO -<span class="token operator">&gt;</span> COCO  <span class="token comment"># to YOLOv5 COCO</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>对每一次转换逐步运行，首先执行 <code>labeled-voc.py</code> 将数据集从从原始标注数据转换成 VOC</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>python3 ./scripts/labeled-voc.py <span class="token punctuation">[</span>--conf<span class="token punctuation">]</span>
<span class="token comment"># example</span>
python3 ./scripts/labeled-voc.py
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>执行 <code>voc-yolo.py</code> 将数据集从 VOC 转换成 YOLO</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>python3 ./scripts/voc-yolo.py <span class="token punctuation">[</span>--conf<span class="token punctuation">]</span>
<span class="token comment"># example</span>
python3 ./scripts/voc-yolo.py
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>执行 <code>yolo-coco.py</code> 将数据集从 YOLO 转换成 COCO (yolov5)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>python3 ./scripts/yolo-coco.py <span class="token punctuation">[</span>--conf<span class="token punctuation">]</span>
<span class="token comment"># example</span>
python3 ./scripts/yolo-coco.py
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>运行后得到 YOLOv5 的 COCO 数据集，包含 <code>images</code>,<code>labels</code> 目录，目录下分别包含子目录 <code>train</code>,<code>val</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>·
└── dataset-custom  <span class="token comment"># 数据集文件夹</span>
    ├── src         <span class="token comment"># 原始数据，按照类别进行归档</span>
    ├── labeled     <span class="token comment"># 压缩、重命名后的文件，在这里进行标注</span>
    └── coco        <span class="token comment"># coco 数据集，用于训练</span>
        ├── images
        │   ├── train
        │   └── val
        └── labels   
            ├── train
            └── val
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="基于视频的数据处理" tabindex="-1"><a class="header-anchor" href="#基于视频的数据处理" aria-hidden="true">#</a> 基于视频的数据处理</h2><p>TODO</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 38650110+HenryZhuHR@users.noreply.github.com">Henry Zhu</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/deep-detection/assets/app.797b6d26.js" defer></script>
  </body>
</html>
